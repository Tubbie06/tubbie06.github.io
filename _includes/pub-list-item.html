{% assign p = include.post %}

<div class="pub-item">
  <div class="pub-title"><strong>{{ p.title }}</strong></div>

  {%- assign authors_line = "" -%}

  {%- if p.authors -%}
    {%- if p.authors.first -%}
      {%- assign authors_line = p.authors | join: ", " -%}
    {%- else -%}
      {%- assign authors_line = p.authors -%}
    {%- endif -%}
  {%- elsif p.author -%}
    {%- assign authors_line = p.author -%}
  {%- elsif p.citation -%}
    {%- assign authors_line = p.citation | split: '(' | first | strip -%}
  {%- endif -%}

  {%- assign authors_line = authors_line | strip -%}

  {% if authors_line != "" %}
    <div class="pub-authors">{{ authors_line }}</div>
  {% endif %}

  <div class="pub-venue">
    <span>
      {% if p.venue %}{{ p.venue }}{% endif %}
      {% if p.date %}{% if p.venue %}, {% endif %}{{ p.date | date: "%Y" }}{% endif %}
    </span>

    {% if p.paperurl %}
      <a class="pub-btn" href="{{ p.paperurl }}" target="_blank" rel="noopener">Paper</a>
    {% elsif p.doi %}
      {% if p.doi contains "http" %}
        <a class="pub-btn" href="{{ p.doi }}" target="_blank" rel="noopener">DOI</a>
      {% else %}
        <a class="pub-btn" href="https://doi.org/{{ p.doi }}" target="_blank" rel="noopener">DOI</a>
      {% endif %}
    {% elsif p.venue_url %}
      <a class="pub-btn" href="{{ p.venue_url }}" target="_blank" rel="noopener">Link</a>
    {% endif %}
  </div>
</div>
